civicgit_api  | INFO:     Will watch for changes in these directories: ['/app']
civicgit_api  | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
civicgit_api  | INFO:     Started reloader process [1] using WatchFiles
civicgit_api  | INFO:     Started server process [8]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 17:43:06,625 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 17:43:06,752 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | INFO:     172.19.0.1:50498 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40848 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40852 - "GET /health/db HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:49894 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52138 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:52138 - "GET /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52138 - "GET /docs HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33084 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33100 - "OPTIONS /api/v1/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33108 - "OPTIONS /api/v1/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33118 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33108 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33084 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33124 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33108 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33084 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33124 - "OPTIONS /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33108 - "OPTIONS /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33118 - "OPTIONS /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33124 - "GET /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33108 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33100 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33124 - "GET /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33118 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33100 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33100 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33118 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33124 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33100 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33100 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33124 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33124 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33100 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33118 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33124 - "GET /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33108 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33100 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33108 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33124 - "GET /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33100 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33124 - "GET /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33108 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33124 - "GET /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33124 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33124 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33108 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33108 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33100 - "GET /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33100 - "GET /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33100 - "OPTIONS /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33108 - "OPTIONS /api/v1/users HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33124 - "OPTIONS /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57488 - "OPTIONS /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57500 - "OPTIONS /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33124 - "OPTIONS /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33100 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:57508 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57508 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:57508 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57508 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57508 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:57488 - "GET /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57508 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57488 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33108 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33124 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57500 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33100 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57508 - "GET /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57488 - "GET /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33108 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33124 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33100 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57500 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57508 - "GET /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57500 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57488 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33100 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33124 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33108 - "GET /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57508 - "GET /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57500 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33100 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57488 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33124 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57508 - "GET /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33108 - "GET /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:43042 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:43042 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:43058 - "GET /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:43058 - "GET /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:43058 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:43042 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:43058 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:43042 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:43042 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:43058 - "GET /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:43042 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:43058 - "GET /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:43064 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:43064 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | 2025-11-24 18:02:32,956 - civicgit.security - WARNING - Token verification failed: Signature has expired.
civicgit_api  | INFO:     172.19.0.1:42796 - "GET /api/v1/auth/me HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-24 18:02:32,963 - civicgit.security - WARNING - Token verification failed: Signature has expired.
civicgit_api  | INFO:     172.19.0.1:42796 - "GET /api/v1/auth/me HTTP/1.1" 401 Unauthorized
civicgit_api  | INFO:     172.19.0.1:42808 - "GET /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42808 - "GET /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:43940 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:47606 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:47608 - "GET /health/db HTTP/1.1" 200 OK
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/models/repository.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 18:32:23,199 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [8]
civicgit_api  | INFO:     Started server process [51]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 18:32:26,383 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 18:32:26,427 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/models/repository.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 18:32:46,591 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [51]
civicgit_api  | INFO:     Started server process [52]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 18:32:48,272 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 18:32:48,310 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/db/migrations/versions/202411241535_update_repository_visibility.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 18:33:10,079 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [52]
civicgit_api  | INFO:     Started server process [53]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 18:33:12,262 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 18:33:12,311 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/deps.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | 2025-11-24 18:33:12,514 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [53]
civicgit_api  | INFO:     Started server process [54]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 18:33:14,336 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 18:33:14,374 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/repositories.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 18:33:54,994 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [54]
civicgit_api  | INFO:     Started server process [55]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 18:33:56,602 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 18:33:56,644 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/repositories.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 18:33:57,548 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [55]
civicgit_api  | INFO:     Started server process [56]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 18:33:59,063 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 18:33:59,101 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/repositories.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | 2025-11-24 18:33:59,703 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [56]
civicgit_api  | INFO:     Started server process [57]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 18:34:01,215 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 18:34:01,260 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/repositories.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 18:34:01,764 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [57]
civicgit_api  | INFO:     Started server process [58]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 18:34:03,322 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 18:34:03,361 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/proposals.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 18:34:38,474 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [58]
civicgit_api  | INFO:     Started server process [59]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 18:34:40,620 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 18:34:40,663 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | INFO:     172.19.0.1:48896 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:48906 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:48920 - "GET /health/db HTTP/1.1" 200 OK
civicgit_api  | 2025-11-24 18:44:03,709 - civicgit.auth - INFO - User logged in successfully: admin
civicgit_api  | INFO:     172.19.0.1:40114 - "POST /api/v1/auth/login HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40114 - "OPTIONS /api/v1/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40114 - "OPTIONS /api/v1/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40116 - "OPTIONS /api/v1/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40128 - "OPTIONS /api/v1/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40116 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:40134 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:40116 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:40134 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:40128 - "OPTIONS /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40114 - "OPTIONS /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40114 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 176, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:40128 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40116 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40134 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 176, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:40116 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40128 - "OPTIONS /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40128 - "OPTIONS /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40116 - "OPTIONS /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40136 - "OPTIONS /api/v1/users HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40138 - "OPTIONS /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40128 - "OPTIONS /api/v1/users HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40136 - "OPTIONS /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40136 - "OPTIONS /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40136 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:40162 - "OPTIONS /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40152 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40152 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:40138 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40152 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40128 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40152 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40152 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:40116 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40136 - "GET /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40138 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40136 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:40162 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40116 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40128 - "GET /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40152 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40128 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40128 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:40136 - "GET /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40138 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40116 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40162 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40136 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:40152 - "GET /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40128 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40116 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40162 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40138 - "GET /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40152 - "GET /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40128 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40136 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40116 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40162 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40128 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40152 - "GET /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40136 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40138 - "GET /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40162 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40116 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40128 - "GET /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40152 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40136 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40138 - "GET /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40128 - "GET /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40116 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40136 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40138 - "GET /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40138 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:40138 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:40136 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 176, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:40138 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 176, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:57564 - "OPTIONS /api/v1/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57564 - "POST /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:57574 - "OPTIONS /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | 2025-11-24 18:46:46,721 - civicgit.repositories - INFO - Repository 'plano-municipal-de-desenvolvimento' created by user admin
civicgit_api  | INFO:     172.19.0.1:57564 - "POST /api/v1/repositories/ HTTP/1.1" 201 Created
civicgit_api  | INFO:     172.19.0.1:57564 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:57564 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:57574 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 176, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:57564 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 176, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:50144 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50136 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50144 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50136 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50156 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 176, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:50136 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50136 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50144 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 176, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:50136 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50136 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50136 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50136 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50158 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50136 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50136 - "OPTIONS /api/v1/voting/sessions/active HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50158 - "OPTIONS /api/v1/proposals?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50158 - "GET /api/v1/proposals?status=discussion HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50174 - "OPTIONS /api/v1/proposals?status=threshold_reached HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50158 - "GET /api/v1/proposals?status=discussion HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50174 - "GET /api/v1/proposals?status=threshold_reached HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50180 - "OPTIONS /api/v1/proposals?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50174 - "GET /api/v1/proposals?status=threshold_reached HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50180 - "OPTIONS /api/v1/proposals/?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50158 - "GET /api/v1/proposals?status=awaiting_review HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50182 - "OPTIONS /api/v1/proposals/?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50184 - "OPTIONS /api/v1/proposals?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50174 - "OPTIONS /api/v1/proposals/?status=threshold_reached HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50158 - "GET /api/v1/proposals?status=awaiting_review HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50182 - "OPTIONS /api/v1/proposals/?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50158 - "OPTIONS /api/v1/proposals/?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50174 - "GET /api/v1/proposals/?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50184 - "GET /api/v1/proposals/?status=threshold_reached HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50182 - "GET /api/v1/proposals/?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50174 - "GET /api/v1/proposals/?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50136 - "GET /api/v1/voting/sessions/active HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50182 - "GET /api/v1/proposals/?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50184 - "GET /api/v1/proposals/?status=threshold_reached HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50136 - "GET /api/v1/voting/sessions/active HTTP/1.1" 200 OK
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/models/user.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 18:54:00,029 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [59]
civicgit_api  | Process SpawnProcess-11:
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/multiprocessing/process.py", line 314, in _bootstrap
civicgit_api  |     self.run()
civicgit_api  |   File "/usr/local/lib/python3.11/multiprocessing/process.py", line 108, in run
civicgit_api  |     self._target(*self._args, **self._kwargs)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
civicgit_api  |     target(sockets=sockets)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 61, in run
civicgit_api  |     return asyncio.run(self.serve(sockets=sockets))
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
civicgit_api  |     return runner.run(main)
civicgit_api  |            ^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
civicgit_api  |     return self._loop.run_until_complete(task)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 68, in serve
civicgit_api  |     config.load()
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 467, in load
civicgit_api  |     self.loaded_app = import_from_string(self.app)
civicgit_api  |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 24, in import_from_string
civicgit_api  |     raise exc from None
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 21, in import_from_string
civicgit_api  |     module = importlib.import_module(module_str)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
civicgit_api  |     return _bootstrap._gcd_import(name[level:], package, level)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
civicgit_api  |   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
civicgit_api  |   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
civicgit_api  |   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
civicgit_api  |   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
civicgit_api  |   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
civicgit_api  |   File "/app/app/main.py", line 9, in <module>
civicgit_api  |     from app.api.v1.router import api_router
civicgit_api  |   File "/app/app/api/v1/router.py", line 6, in <module>
civicgit_api  |     from app.api.v1.endpoints import auth
civicgit_api  |   File "/app/app/api/v1/endpoints/auth.py", line 9, in <module>
civicgit_api  |     from app.api import deps
civicgit_api  |   File "/app/app/api/deps.py", line 7, in <module>
civicgit_api  |     from app.models.user import User
civicgit_api  |   File "/app/app/models/__init__.py", line 1, in <module>
civicgit_api  |     from app.models.user import User
civicgit_api  | ModuleNotFoundError: No module named 'app.models.user'
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/models/user.py'. Reloading...
civicgit_api  | INFO:     Started server process [88]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 18:54:19,136 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 18:54:19,184 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/deps.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | 2025-11-24 18:54:47,378 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [88]
civicgit_api  | Process SpawnProcess-13:
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/multiprocessing/process.py", line 314, in _bootstrap
civicgit_api  |     self.run()
civicgit_api  |   File "/usr/local/lib/python3.11/multiprocessing/process.py", line 108, in run
civicgit_api  |     self._target(*self._args, **self._kwargs)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
civicgit_api  |     target(sockets=sockets)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 61, in run
civicgit_api  |     return asyncio.run(self.serve(sockets=sockets))
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/asyncio/runners.py", line 190, in run
civicgit_api  |     return runner.run(main)
civicgit_api  |            ^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
civicgit_api  |     return self._loop.run_until_complete(task)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 68, in serve
civicgit_api  |     config.load()
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 467, in load
civicgit_api  |     self.loaded_app = import_from_string(self.app)
civicgit_api  |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 21, in import_from_string
civicgit_api  |     module = importlib.import_module(module_str)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
civicgit_api  |     return _bootstrap._gcd_import(name[level:], package, level)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
civicgit_api  |   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
civicgit_api  |   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
civicgit_api  |   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
civicgit_api  |   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
civicgit_api  |   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
civicgit_api  |   File "/app/app/main.py", line 9, in <module>
civicgit_api  |     from app.api.v1.router import api_router
civicgit_api  |   File "/app/app/api/v1/router.py", line 6, in <module>
civicgit_api  |     from app.api.v1.endpoints import auth
civicgit_api  |   File "/app/app/api/v1/endpoints/auth.py", line 9, in <module>
civicgit_api  |     from app.api import deps
civicgit_api  | ImportError: cannot import name 'deps' from 'app.api' (/app/app/api/__init__.py)
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/deps.py'. Reloading...
civicgit_api  | INFO:     Started server process [90]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 18:56:06,095 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 18:56:06,215 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/repositories.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 18:57:38,800 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [90]
civicgit_api  | Optional router 'app.api.v1.endpoints.repositories' not loaded: No module named 'app.api.v1.endpoints.repositories'
civicgit_api  | INFO:     Started server process [91]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 18:57:41,019 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 18:57:41,064 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/repositories.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 18:59:05,718 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [91]
civicgit_api  | INFO:     Started server process [92]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 18:59:08,209 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 18:59:08,277 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/proposals.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 18:59:13,694 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [92]
civicgit_api  | Optional router 'app.api.v1.endpoints.proposals' not loaded: No module named 'app.api.v1.endpoints.proposals'
civicgit_api  | INFO:     Started server process [93]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 18:59:15,369 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 18:59:15,412 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/proposals.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 18:59:33,059 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [93]
civicgit_api  | INFO:     Started server process [94]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 18:59:34,936 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 18:59:34,983 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/issues.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 18:59:42,305 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [94]
civicgit_api  | Optional router 'app.api.v1.endpoints.issues' not loaded: No module named 'app.api.v1.endpoints.issues'
civicgit_api  | INFO:     Started server process [95]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 18:59:44,015 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 18:59:44,058 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/issues.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | 2025-11-24 19:00:11,237 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [95]
civicgit_api  | INFO:     Started server process [96]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:00:13,009 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:00:13,058 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/deps.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:01:01,414 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [96]
civicgit_api  | INFO:     Started server process [97]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:01:03,272 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:01:03,315 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/deps.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | 2025-11-24 19:01:09,736 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [97]
civicgit_api  | INFO:     Started server process [98]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:01:11,436 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:01:11,478 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/repositories.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:01:16,494 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [98]
civicgit_api  | INFO:     Started server process [99]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:01:18,369 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:01:18,412 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/proposals.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:01:22,428 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [99]
civicgit_api  | INFO:     Started server process [100]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:01:24,304 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:01:24,356 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/issues.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | 2025-11-24 19:01:27,567 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [100]
civicgit_api  | INFO:     Started server process [101]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:01:29,451 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:01:29,494 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | INFO:     172.19.0.1:47342 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:47348 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:47358 - "GET /health/db HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42356 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42356 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42358 - "OPTIONS /api/v1/voting/sessions/active HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42364 - "OPTIONS /api/v1/proposals?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42370 - "OPTIONS /api/v1/proposals?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42380 - "OPTIONS /api/v1/proposals?status=threshold_reached HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42390 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42358 - "OPTIONS /api/v1/voting/sessions/active HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42364 - "OPTIONS /api/v1/proposals?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42390 - "GET /api/v1/proposals?status=awaiting_review HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:42370 - "GET /api/v1/proposals?status=discussion HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:42358 - "GET /api/v1/proposals?status=threshold_reached HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:42390 - "GET /api/v1/proposals?status=discussion HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:42370 - "GET /api/v1/proposals?status=awaiting_review HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:42364 - "OPTIONS /api/v1/proposals/?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42358 - "GET /api/v1/proposals?status=threshold_reached HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:42390 - "OPTIONS /api/v1/proposals/?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42364 - "OPTIONS /api/v1/proposals/?status=threshold_reached HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42370 - "OPTIONS /api/v1/proposals/?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42390 - "OPTIONS /api/v1/proposals/?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42370 - "OPTIONS /api/v1/proposals/?status=threshold_reached HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42356 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42356 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42390 - "GET /api/v1/proposals/?status=threshold_reached HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42380 - "GET /api/v1/voting/sessions/active HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42364 - "GET /api/v1/proposals/?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42358 - "GET /api/v1/proposals/?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42356 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42390 - "GET /api/v1/proposals/?status=threshold_reached HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42364 - "GET /api/v1/proposals/?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42358 - "GET /api/v1/proposals/?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42380 - "GET /api/v1/voting/sessions/active HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42356 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42356 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42356 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42356 - "OPTIONS /api/v1/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42380 - "OPTIONS /api/v1/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42358 - "OPTIONS /api/v1/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42358 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:42380 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:42358 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:42380 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:42380 - "OPTIONS /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42358 - "OPTIONS /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42356 - "OPTIONS /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42364 - "OPTIONS /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42364 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42356 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:42358 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42364 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:42358 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:42358 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:42380 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42380 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42390 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:42380 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:42358 - "OPTIONS /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50886 - "OPTIONS /api/v1/users HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50886 - "OPTIONS /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42358 - "OPTIONS /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50910 - "OPTIONS /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50922 - "OPTIONS /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50896 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50886 - "OPTIONS /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42358 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50922 - "OPTIONS /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50922 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50922 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50886 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50922 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50926 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42358 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50886 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50922 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50896 - "GET /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50910 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50896 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50922 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50886 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50896 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50926 - "GET /api/v1/users/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1647, in _object_value_for_elem
civicgit_api  |     return self._object_lookup[elem]
civicgit_api  |            ~~~~~~~~~~~~~~~~~~~^^^^^^
civicgit_api  | KeyError: 'VERIFIED'
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/users.py", line 26, in list_users
civicgit_api  |     return db.query(UserModel).order_by(UserModel.created_at.desc()).all()
civicgit_api  | INFO:     172.19.0.1:42358 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1786, in all
civicgit_api  |     return self._allrows()
civicgit_api  |            ^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 554, in _allrows
civicgit_api  |     rows = self._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1693, in _fetchall_impl
civicgit_api  |     return self._real_result._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 2293, in _fetchall_impl
civicgit_api  |     return list(self.iterator)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 215, in chunks
civicgit_api  |     fetch = cursor._raw_all_rows()
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in _raw_all_rows
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in <listcomp>
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |             ^^^^^^^^^^^^^
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 16, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 73, in sqlalchemy.cyextension.resultproxy._apply_processors
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1767, in process
civicgit_api  |     value = self._object_value_for_elem(value)
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1649, in _object_value_for_elem
civicgit_api  |     raise LookupError(
civicgit_api  | LookupError: 'VERIFIED' is not among the defined enum values. Enum name: userlevel. Possible values: ANONYMOUS, REGISTERED, FILIADO, SPECIAL
civicgit_api  | INFO:     172.19.0.1:50910 - "GET /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50922 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50896 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50886 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42358 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50896 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50922 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50886 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42358 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50928 - "GET /api/v1/users/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1647, in _object_value_for_elem
civicgit_api  |     return self._object_lookup[elem]
civicgit_api  |            ~~~~~~~~~~~~~~~~~~~^^^^^^
civicgit_api  | KeyError: 'VERIFIED'
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/users.py", line 26, in list_users
civicgit_api  |     return db.query(UserModel).order_by(UserModel.created_at.desc()).all()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1786, in all
civicgit_api  |     return self._allrows()
civicgit_api  |            ^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 554, in _allrows
civicgit_api  |     rows = self._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1693, in _fetchall_impl
civicgit_api  |     return self._real_result._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 2293, in _fetchall_impl
civicgit_api  |     return list(self.iterator)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 215, in chunks
civicgit_api  | INFO:     172.19.0.1:50910 - "GET /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  |     fetch = cursor._raw_all_rows()
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in _raw_all_rows
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in <listcomp>
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |             ^^^^^^^^^^^^^
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 16, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 73, in sqlalchemy.cyextension.resultproxy._apply_processors
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1767, in process
civicgit_api  |     value = self._object_value_for_elem(value)
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1649, in _object_value_for_elem
civicgit_api  |     raise LookupError(
civicgit_api  | LookupError: 'VERIFIED' is not among the defined enum values. Enum name: userlevel. Possible values: ANONYMOUS, REGISTERED, FILIADO, SPECIAL
civicgit_api  | INFO:     172.19.0.1:42358 - "GET /api/v1/users/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1647, in _object_value_for_elem
civicgit_api  |     return self._object_lookup[elem]
civicgit_api  |            ~~~~~~~~~~~~~~~~~~~^^^^^^
civicgit_api  | KeyError: 'VERIFIED'
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/users.py", line 26, in list_users
civicgit_api  |     return db.query(UserModel).order_by(UserModel.created_at.desc()).all()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1786, in all
civicgit_api  |     return self._allrows()
civicgit_api  |            ^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 554, in _allrows
civicgit_api  |     rows = self._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1693, in _fetchall_impl
civicgit_api  |     return self._real_result._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 2293, in _fetchall_impl
civicgit_api  |     return list(self.iterator)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 215, in chunks
civicgit_api  |     fetch = cursor._raw_all_rows()
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in _raw_all_rows
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in <listcomp>
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |             ^^^^^^^^^^^^^
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 16, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 73, in sqlalchemy.cyextension.resultproxy._apply_processors
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1767, in process
civicgit_api  |     value = self._object_value_for_elem(value)
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1649, in _object_value_for_elem
civicgit_api  |     raise LookupError(
civicgit_api  | LookupError: 'VERIFIED' is not among the defined enum values. Enum name: userlevel. Possible values: ANONYMOUS, REGISTERED, FILIADO, SPECIAL
civicgit_api  | INFO:     172.19.0.1:50910 - "GET /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50886 - "GET /api/v1/users/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1647, in _object_value_for_elem
civicgit_api  |     return self._object_lookup[elem]
civicgit_api  |            ~~~~~~~~~~~~~~~~~~~^^^^^^
civicgit_api  | KeyError: 'VERIFIED'
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/users.py", line 26, in list_users
civicgit_api  |     return db.query(UserModel).order_by(UserModel.created_at.desc()).all()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1786, in all
civicgit_api  |     return self._allrows()
civicgit_api  |            ^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 554, in _allrows
civicgit_api  |     rows = self._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1693, in _fetchall_impl
civicgit_api  |     return self._real_result._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 2293, in _fetchall_impl
civicgit_api  |     return list(self.iterator)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 215, in chunks
civicgit_api  |     fetch = cursor._raw_all_rows()
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in _raw_all_rows
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in <listcomp>
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |             ^^^^^^^^^^^^^
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 16, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 73, in sqlalchemy.cyextension.resultproxy._apply_processors
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1767, in process
civicgit_api  |     value = self._object_value_for_elem(value)
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1649, in _object_value_for_elem
civicgit_api  |     raise LookupError(
civicgit_api  | LookupError: 'VERIFIED' is not among the defined enum values. Enum name: userlevel. Possible values: ANONYMOUS, REGISTERED, FILIADO, SPECIAL
civicgit_api  | INFO:     172.19.0.1:50910 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50910 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50896 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:50910 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:50922 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50922 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50942 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50922 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50942 - "GET /api/v1/proposals?status=discussion HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50942 - "GET /api/v1/proposals?status=discussion HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50954 - "GET /api/v1/proposals?status=awaiting_review HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50966 - "GET /api/v1/proposals?status=threshold_reached HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50954 - "GET /api/v1/proposals?status=awaiting_review HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50974 - "GET /api/v1/proposals?status=threshold_reached HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:50942 - "GET /api/v1/proposals/?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50922 - "GET /api/v1/voting/sessions/active HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50954 - "GET /api/v1/proposals/?status=threshold_reached HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50966 - "GET /api/v1/proposals/?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50942 - "GET /api/v1/proposals/?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50954 - "GET /api/v1/proposals/?status=threshold_reached HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50922 - "GET /api/v1/voting/sessions/active HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50966 - "GET /api/v1/proposals/?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52288 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52308 - "GET /api/v1/proposals?status=discussion HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:52318 - "GET /api/v1/proposals?status=threshold_reached HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:52324 - "GET /api/v1/proposals?status=awaiting_review HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:52318 - "GET /api/v1/proposals?status=discussion HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:52308 - "GET /api/v1/proposals?status=threshold_reached HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:52324 - "GET /api/v1/proposals?status=awaiting_review HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:52288 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52288 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52318 - "GET /api/v1/proposals/?status=threshold_reached HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52324 - "GET /api/v1/proposals/?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52296 - "GET /api/v1/voting/sessions/active HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52308 - "GET /api/v1/proposals/?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52288 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52318 - "GET /api/v1/proposals/?status=threshold_reached HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52308 - "GET /api/v1/proposals/?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52324 - "GET /api/v1/proposals/?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52288 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52296 - "GET /api/v1/voting/sessions/active HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52288 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:52288 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:52288 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:52296 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:52288 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:36778 - "OPTIONS /api/v1/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:36778 - "POST /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:36788 - "OPTIONS /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | 2025-11-24 19:03:10,944 - civicgit.repositories - INFO - Repository 'plano-diretor-2' created by user admin
civicgit_api  | INFO:     172.19.0.1:36778 - "POST /api/v1/repositories/ HTTP/1.1" 201 Created
civicgit_api  | INFO:     172.19.0.1:36778 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:36778 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:36788 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:36778 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:36814 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:36814 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:36804 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:36804 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:36826 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:36804 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:36804 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:36814 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:36804 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:36804 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:46594 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:46594 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:46602 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:46594 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:46594 - "OPTIONS /api/v1/proposals/7 HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:46594 - "GET /api/v1/proposals/7 HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:46602 - "GET /api/v1/proposals/7 HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:46594 - "GET /api/v1/proposals?status=discussion HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:46594 - "GET /api/v1/proposals?status=discussion HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:46616 - "GET /api/v1/proposals?status=awaiting_review HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:46624 - "GET /api/v1/proposals?status=threshold_reached HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:46616 - "GET /api/v1/proposals?status=awaiting_review HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:46624 - "GET /api/v1/proposals?status=threshold_reached HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:46602 - "GET /api/v1/voting/sessions/active HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:46638 - "GET /api/v1/proposals/?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:46594 - "GET /api/v1/proposals/?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:46648 - "GET /api/v1/proposals/?status=threshold_reached HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:46594 - "GET /api/v1/proposals/?status=awaiting_review HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:46638 - "GET /api/v1/proposals/?status=discussion HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:46602 - "GET /api/v1/voting/sessions/active HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:46648 - "GET /api/v1/proposals/?status=threshold_reached HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:54474 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:54474 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:54480 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:54474 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:54492 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:54480 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:54474 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:54492 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:42334 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57268 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57272 - "GET /health/db HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:39354 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50398 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50410 - "GET /health/db HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41196 - "OPTIONS /api/v1/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41190 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41200 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41190 - "OPTIONS /api/v1/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41196 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41202 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41214 - "OPTIONS /api/v1/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41190 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41202 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41216 - "OPTIONS /api/v1/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41202 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41216 - "OPTIONS /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41190 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41214 - "OPTIONS /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | 2025-11-24 19:18:03,662 - civicgit.security - WARNING - Token verification failed: Signature has expired.
civicgit_api  | 2025-11-24 19:18:03,637 - civicgit.security - WARNING - Token verification failed: Signature has expired.
civicgit_api  | 2025-11-24 19:18:03,672 - civicgit.security - WARNING - Token verification failed: Signature has expired.
civicgit_api  | INFO:     172.19.0.1:41200 - "GET /api/v1/auth/me HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-24 19:18:03,743 - civicgit.security - WARNING - Token verification failed: Signature has expired.
civicgit_api  | INFO:     172.19.0.1:41200 - "GET /api/v1/auth/me HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-24 19:18:03,746 - civicgit.security - WARNING - Token verification failed: Signature has expired.
civicgit_api  | INFO:     172.19.0.1:41200 - "GET /api/v1/auth/me HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-24 19:18:03,750 - civicgit.security - WARNING - Token verification failed: Signature has expired.
civicgit_api  | INFO:     172.19.0.1:41200 - "GET /api/v1/auth/me HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-24 19:18:05,128 - civicgit.auth - INFO - User logged in successfully: admin
civicgit_api  | INFO:     172.19.0.1:41200 - "POST /api/v1/auth/login HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41200 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41214 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41200 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41214 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41214 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41200 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:41214 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:41190 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41196 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41196 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41190 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41190 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41196 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:41190 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "AFFILIATES_ONLY"
civicgit_api  | LINE 3: ...isibility = 'PUBLIC' OR repositories.visibility = 'AFFILIATE...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/models/user.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:23:58,296 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [101]
civicgit_api  | INFO:     Started server process [165]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:24:01,439 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:24:01,492 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/models/repository.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | 2025-11-24 19:24:03,099 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [165]
civicgit_api  | INFO:     Started server process [166]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:24:04,690 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:24:04,729 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/deps.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | 2025-11-24 19:24:13,961 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [166]
civicgit_api  | INFO:     Started server process [167]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:24:15,535 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:24:15,573 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/db/init_db.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | 2025-11-24 19:24:50,798 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [167]
civicgit_api  | INFO:     Started server process [168]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:24:52,349 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:24:52,387 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/db/init_db.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:25:07,543 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [168]
civicgit_api  | INFO:     Started server process [169]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:25:09,160 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:25:09,200 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/db/migrations/versions/202411241700_restrict_repository_visibility.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:25:25,453 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [169]
civicgit_api  | INFO:     Started server process [170]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:25:27,006 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:25:27,045 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/repositories.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:26:08,382 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [170]
civicgit_api  | INFO:     Started server process [171]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:26:10,045 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:26:10,082 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/proposals.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:26:16,103 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [171]
civicgit_api  | INFO:     Started server process [172]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:26:17,747 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:26:17,787 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/db/init_db.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:27:07,037 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [172]
civicgit_api  | INFO:     Started server process [173]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:27:08,679 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:27:08,719 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/db/migrations/versions/202411241700_restrict_repository_visibility.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:28:43,030 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [173]
civicgit_api  | INFO:     Started server process [180]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:28:44,713 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:28:44,754 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/db/migrations/versions/202411241700_restrict_repository_visibility.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:29:57,509 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [180]
civicgit_api  | INFO:     Started server process [187]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:29:59,082 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:29:59,121 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/db/migrations/versions/202411241700_restrict_repository_visibility.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:30:51,395 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [187]
civicgit_api  | INFO:     Started server process [194]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:30:53,013 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:30:53,052 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | INFO:     172.19.0.1:33498 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33490 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33488 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33504 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33512 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33528 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33528 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33528 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33528 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33528 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33528 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33528 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33528 - "OPTIONS /api/v1/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33504 - "OPTIONS /api/v1/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33504 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33504 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33528 - "OPTIONS /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33528 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:33504 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:33512 - "OPTIONS /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33498 - "OPTIONS /api/v1/users HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33488 - "OPTIONS /api/v1/admin/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33498 - "OPTIONS /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33490 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33512 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33490 - "OPTIONS /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33512 - "OPTIONS /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33490 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33538 - "OPTIONS /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33512 - "OPTIONS /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33488 - "GET /api/v1/admin/repositories HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1647, in _object_value_for_elem
civicgit_api  |     return self._object_lookup[elem]
civicgit_api  |            ~~~~~~~~~~~~~~~~~~~^^^^^^
civicgit_api  | KeyError: 'public'
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/admin.py", line 41, in admin_list_repositories
civicgit_api  |     return db.query(Repository).order_by(Repository.created_at.desc()).all()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1786, in all
civicgit_api  |     return self._allrows()
civicgit_api  |            ^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 554, in _allrows
civicgit_api  |     rows = self._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1693, in _fetchall_impl
civicgit_api  |     return self._real_result._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 2293, in _fetchall_impl
civicgit_api  |     return list(self.iterator)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 215, in chunks
civicgit_api  |     fetch = cursor._raw_all_rows()
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in _raw_all_rows
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in <listcomp>
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |             ^^^^^^^^^^^^^
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 16, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 73, in sqlalchemy.cyextension.resultproxy._apply_processors
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1767, in process
civicgit_api  |     value = self._object_value_for_elem(value)
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1649, in _object_value_for_elem
civicgit_api  |     raise LookupError(
civicgit_api  | LookupError: 'public' is not among the defined enum values. Enum name: repositoryvisibility. Possible values: PUBLIC, AFFILIATES_..
civicgit_api  | INFO:     172.19.0.1:33490 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33490 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33542 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33490 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33538 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33490 - "GET /api/v1/users HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33512 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33538 - "OPTIONS /api/v1/users/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33534 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33498 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33542 - "GET /api/v1/admin/repositories HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1647, in _object_value_for_elem
civicgit_api  |     return self._object_lookup[elem]
civicgit_api  |            ~~~~~~~~~~~~~~~~~~~^^^^^^
civicgit_api  | KeyError: 'public'
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/admin.py", line 41, in admin_list_repositories
civicgit_api  |     return db.query(Repository).order_by(Repository.created_at.desc()).all()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1786, in all
civicgit_api  |     return self._allrows()
civicgit_api  |            ^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 554, in _allrows
civicgit_api  |     rows = self._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1693, in _fetchall_impl
civicgit_api  |     return self._real_result._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 2293, in _fetchall_impl
civicgit_api  |     return list(self.iterator)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 215, in chunks
civicgit_api  |     fetch = cursor._raw_all_rows()
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in _raw_all_rows
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in <listcomp>
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |             ^^^^^^^^^^^^^
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 16, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 73, in sqlalchemy.cyextension.resultproxy._apply_processors
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1767, in process
civicgit_api  |     value = self._object_value_for_elem(value)
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1649, in _object_value_for_elem
civicgit_api  |     raise LookupError(
civicgit_api  | LookupError: 'public' is not among the defined enum values. Enum name: repositoryvisibility. Possible values: PUBLIC, AFFILIATES_..
civicgit_api  | INFO:     172.19.0.1:33490 - "GET /api/v1/users/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1647, in _object_value_for_elem
civicgit_api  |     return self._object_lookup[elem]
civicgit_api  |            ~~~~~~~~~~~~~~~~~~~^^^^^^
civicgit_api  | KeyError: 'VERIFIED'
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/users.py", line 26, in list_users
civicgit_api  |     return db.query(UserModel).order_by(UserModel.created_at.desc()).all()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1786, in all
civicgit_api  |     return self._allrows()
civicgit_api  |            ^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 554, in _allrows
civicgit_api  |     rows = self._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1693, in _fetchall_impl
civicgit_api  |     return self._real_result._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 2293, in _fetchall_impl
civicgit_api  |     return list(self.iterator)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 215, in chunks
civicgit_api  |     fetch = cursor._raw_all_rows()
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in _raw_all_rows
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in <listcomp>
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |             ^^^^^^^^^^^^^
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 16, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 73, in sqlalchemy.cyextension.resultproxy._apply_processors
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1767, in process
civicgit_api  |     value = self._object_value_for_elem(value)
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1649, in _object_value_for_elem
civicgit_api  |     raise LookupError(
civicgit_api  | LookupError: 'VERIFIED' is not among the defined enum values. Enum name: userlevel. Possible values: ANONYMOUS, REGISTERED, FILIADO, SPECIAL
civicgit_api  | INFO:     172.19.0.1:33538 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33498 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33534 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33512 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33498 - "GET /api/v1/users/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1647, in _object_value_for_elem
civicgit_api  |     return self._object_lookup[elem]
civicgit_api  |            ~~~~~~~~~~~~~~~~~~~^^^^^^
civicgit_api  | KeyError: 'VERIFIED'
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/users.py", line 26, in list_users
civicgit_api  |     return db.query(UserModel).order_by(UserModel.created_at.desc()).all()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1786, in all
civicgit_api  |     return self._allrows()
civicgit_api  |            ^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 554, in _allrows
civicgit_api  |     rows = self._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1693, in _fetchall_impl
civicgit_api  |     return self._real_result._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 2293, in _fetchall_impl
civicgit_api  |     return list(self.iterator)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 215, in chunks
civicgit_api  |     fetch = cursor._raw_all_rows()
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in _raw_all_rows
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in <listcomp>
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |             ^^^^^^^^^^^^^
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 16, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 73, in sqlalchemy.cyextension.resultproxy._apply_processors
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1767, in process
civicgit_api  |     value = self._object_value_for_elem(value)
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1649, in _object_value_for_elem
civicgit_api  |     raise LookupError(
civicgit_api  | LookupError: 'VERIFIED' is not among the defined enum values. Enum name: userlevel. Possible values: ANONYMOUS, REGISTERED, FILIADO, SPECIAL
civicgit_api  | INFO:     172.19.0.1:33550 - "GET /api/v1/admin/repositories HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1647, in _object_value_for_elem
civicgit_api  |     return self._object_lookup[elem]
civicgit_api  |            ~~~~~~~~~~~~~~~~~~~^^^^^^
civicgit_api  | KeyError: 'public'
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/admin.py", line 41, in admin_list_repositories
civicgit_api  |     return db.query(Repository).order_by(Repository.created_at.desc()).all()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1786, in all
civicgit_api  |     return self._allrows()
civicgit_api  |            ^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 554, in _allrows
civicgit_api  |     rows = self._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1693, in _fetchall_impl
civicgit_api  |     return self._real_result._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  | INFO:     172.19.0.1:33538 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 2293, in _fetchall_impl
civicgit_api  |     return list(self.iterator)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 215, in chunks
civicgit_api  |     fetch = cursor._raw_all_rows()
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in _raw_all_rows
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in <listcomp>
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |             ^^^^^^^^^^^^^
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 16, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 73, in sqlalchemy.cyextension.resultproxy._apply_processors
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1767, in process
civicgit_api  |     value = self._object_value_for_elem(value)
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1649, in _object_value_for_elem
civicgit_api  |     raise LookupError(
civicgit_api  | LookupError: 'public' is not among the defined enum values. Enum name: repositoryvisibility. Possible values: PUBLIC, AFFILIATES_..
civicgit_api  | INFO:     172.19.0.1:33566 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33534 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33512 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33582 - "GET /api/v1/users/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1647, in _object_value_for_elem
civicgit_api  |     return self._object_lookup[elem]
civicgit_api  |            ~~~~~~~~~~~~~~~~~~~^^^^^^
civicgit_api  | KeyError: 'VERIFIED'
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/users.py", line 26, in list_users
civicgit_api  |     return db.query(UserModel).order_by(UserModel.created_at.desc()).all()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1786, in all
civicgit_api  |     return self._allrows()
civicgit_api  |            ^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 554, in _allrows
civicgit_api  |     rows = self._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1693, in _fetchall_impl
civicgit_api  |     return self._real_result._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 2293, in _fetchall_impl
civicgit_api  |     return list(self.iterator)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 215, in chunks
civicgit_api  |     fetch = cursor._raw_all_rows()
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in _raw_all_rows
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in <listcomp>
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |             ^^^^^^^^^^^^^
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 16, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
civicgit_api  | INFO:     172.19.0.1:33538 - "GET /api/v1/admin/activity HTTP/1.1" 200 OK
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 73, in sqlalchemy.cyextension.resultproxy._apply_processors
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1767, in process
civicgit_api  |     value = self._object_value_for_elem(value)
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1649, in _object_value_for_elem
civicgit_api  |     raise LookupError(
civicgit_api  | LookupError: 'VERIFIED' is not among the defined enum values. Enum name: userlevel. Possible values: ANONYMOUS, REGISTERED, FILIADO, SPECIAL
civicgit_api  | INFO:     172.19.0.1:33566 - "GET /api/v1/admin/metrics HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33512 - "GET /api/v1/admin/issues HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33534 - "GET /api/v1/admin/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33586 - "GET /api/v1/admin/repositories HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1647, in _object_value_for_elem
civicgit_api  |     return self._object_lookup[elem]
civicgit_api  |            ~~~~~~~~~~~~~~~~~~~^^^^^^
civicgit_api  | KeyError: 'public'
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/admin.py", line 41, in admin_list_repositories
civicgit_api  |     return db.query(Repository).order_by(Repository.created_at.desc()).all()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1786, in all
civicgit_api  |     return self._allrows()
civicgit_api  |            ^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 554, in _allrows
civicgit_api  |     rows = self._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1693, in _fetchall_impl
civicgit_api  |     return self._real_result._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 2293, in _fetchall_impl
civicgit_api  |     return list(self.iterator)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 215, in chunks
civicgit_api  |     fetch = cursor._raw_all_rows()
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in _raw_all_rows
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in <listcomp>
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |             ^^^^^^^^^^^^^
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 16, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 73, in sqlalchemy.cyextension.resultproxy._apply_processors
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1767, in process
civicgit_api  |     value = self._object_value_for_elem(value)
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1649, in _object_value_for_elem
civicgit_api  |     raise LookupError(
civicgit_api  | LookupError: 'public' is not among the defined enum values. Enum name: repositoryvisibility. Possible values: PUBLIC, AFFILIATES_..
civicgit_api  | INFO:     172.19.0.1:33538 - "GET /api/v1/users/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1647, in _object_value_for_elem
civicgit_api  |     return self._object_lookup[elem]
civicgit_api  |            ~~~~~~~~~~~~~~~~~~~^^^^^^
civicgit_api  | KeyError: 'VERIFIED'
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/users.py", line 26, in list_users
civicgit_api  |     return db.query(UserModel).order_by(UserModel.created_at.desc()).all()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1786, in all
civicgit_api  |     return self._allrows()
civicgit_api  |            ^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 554, in _allrows
civicgit_api  |     rows = self._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 1693, in _fetchall_impl
civicgit_api  |     return self._real_result._fetchall_impl()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 2293, in _fetchall_impl
civicgit_api  |     return list(self.iterator)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 215, in chunks
civicgit_api  |     fetch = cursor._raw_all_rows()
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in _raw_all_rows
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 547, in <listcomp>
civicgit_api  |     return [make_row(row) for row in rows]
civicgit_api  |             ^^^^^^^^^^^^^
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 16, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
civicgit_api  |   File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 73, in sqlalchemy.cyextension.resultproxy._apply_processors
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1767, in process
civicgit_api  |     value = self._object_value_for_elem(value)
civicgit_api  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1649, in _object_value_for_elem
civicgit_api  |     raise LookupError(
civicgit_api  | LookupError: 'VERIFIED' is not among the defined enum values. Enum name: userlevel. Possible values: ANONYMOUS, REGISTERED, FILIADO, SPECIAL
civicgit_api  | INFO:     172.19.0.1:33534 - "OPTIONS /api/v1/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33512 - "OPTIONS /api/v1/proposals HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33534 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33534 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33512 - "OPTIONS /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33512 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33534 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33512 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33534 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33534 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33512 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:33534 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33512 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:33566 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:33534 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:41946 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41962 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41942 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41946 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41962 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41942 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41946 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41942 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41976 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41946 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41982 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41962 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  | INFO:     172.19.0.1:41976 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:41982 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41976 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41982 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41976 - "GET /api/v1/proposals HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41982 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41942 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41946 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:41982 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41942 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:41976 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41982 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:41994 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:41976 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:41994 - "GET /api/v1/proposals/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42000 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:41994 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:41994 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:42016 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42016 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42030 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:42016 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:46910 - "OPTIONS /api/v1/repositories HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:46910 - "POST /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:46918 - "OPTIONS /api/v1/repositories/ HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:46910 - "POST /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 1: ...fs', 'bsnfs', 'nxnn', false, NULL, 'POLICY_AREA', 'PUBLIC', ...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 229, in create_repository
civicgit_api  |     db.commit()
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1969, in commit
civicgit_api  |     trans.commit(_to_root=True)
civicgit_api  |   File "<string>", line 2, in commit
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
civicgit_api  |     ret_value = fn(self, *arg, **kw)
civicgit_api  |                 ^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1256, in commit
civicgit_api  |     self._prepare_impl()
civicgit_api  |   File "<string>", line 2, in _prepare_impl
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
civicgit_api  |     ret_value = fn(self, *arg, **kw)
civicgit_api  |                 ^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1231, in _prepare_impl
civicgit_api  |     self.session.flush()
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4312, in flush
civicgit_api  |     self._flush(objects)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4447, in _flush
civicgit_api  |     with util.safe_reraise():
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
civicgit_api  |     raise exc_value.with_traceback(exc_tb)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4408, in _flush
civicgit_api  |     flush_context.execute()
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
civicgit_api  |     rec.execute(self)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
civicgit_api  |     util.preloaded.orm_persistence.save_obj(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
civicgit_api  |     _emit_insert_statements(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1226, in _emit_insert_statements
civicgit_api  |     result = connection.execute(
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 1: ...fs', 'bsnfs', 'nxnn', false, NULL, 'POLICY_AREA', 'PUBLIC', ...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: INSERT INTO repositories (name, slug, description, is_fork, forked_from_id, type, visibility, jurisdiction_name, jurisdiction_type, quorum_percentage, voting_period_days, min_signatures_for_voting, allow_public_proposals, allow_public_voting, require_verification_for_voting, is_active, is_archived, created_at, updated_at, proposals_count, issues_count, contributors_count) VALUES (%(name)s, %(slug)s, %(description)s, %(is_fork)s, %(forked_from_id)s, %(type)s, %(visibility)s, %(jurisdiction_name)s, %(jurisdiction_type)s, %(quorum_percentage)s, %(voting_period_days)s, %(min_signatures_for_voting)s, %(allow_public_proposals)s, %(allow_public_voting)s, %(require_verification_for_voting)s, %(is_active)s, %(is_archived)s, %(created_at)s, %(updated_at)s, %(proposals_count)s, %(issues_count)s, %(contributors_count)s) RETURNING repositories.id]
civicgit_api  | [parameters: {'name': 'bsnfs', 'slug': 'bsnfs', 'description': 'nxnn', 'is_fork': False, 'forked_from_id': None, 'type': 'POLICY_AREA', 'visibility': 'PUBLIC', 'jurisdiction_name': 'fnxfs', 'jurisdiction_type': 'Municipal', 'quorum_percentage': 10, 'voting_period_days': 7, 'min_signatures_for_voting': 500, 'allow_public_proposals': True, 'allow_public_voting': True, 'require_verification_for_voting': True, 'is_active': True, 'is_archived': False, 'created_at': datetime.datetime(2025, 11, 24, 19, 32, 26, 698251), 'updated_at': datetime.datetime(2025, 11, 24, 19, 32, 26, 698253), 'proposals_count': 0, 'issues_count': 0, 'contributors_count': 0}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:48618 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/db/migrations/versions/202411241710_fix_userlevel_enum.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:33:26,530 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [194]
civicgit_api  | INFO:     Started server process [226]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:33:28,178 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:33:28,215 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/db/migrations/versions/202411241710_fix_userlevel_enum.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:33:46,278 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [226]
civicgit_api  | INFO:     Started server process [233]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:33:47,946 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:33:47,989 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | INFO:     172.19.0.1:54900 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:42404 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:44540 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:44540 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:44540 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:44540 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:44540 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:44540 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:44540 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:44540 - "GET /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:44554 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:44540 - "GET /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 169, in list_repositories
civicgit_api  |     repositories = query.order_by(RepositoryModel.created_at.desc()).all()
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2693, in all
civicgit_api  |     return self._iter().all()  # type: ignore
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
civicgit_api  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
civicgit_api  |                                                   ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
civicgit_api  |     return self._execute_internal(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
civicgit_api  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
civicgit_api  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
civicgit_api  |     result = conn.execute(
civicgit_api  |              ^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 3: ....is_active IS true AND (repositories.visibility = 'PUBLIC' O...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: SELECT repositories.id AS repositories_id, repositories.name AS repositories_name, repositories.slug AS repositories_slug, repositories.description AS repositories_description, repositories.is_fork AS repositories_is_fork, repositories.forked_from_id AS repositories_forked_from_id, repositories.type AS repositories_type, repositories.visibility AS repositories_visibility, repositories.jurisdiction_name AS repositories_jurisdiction_name, repositories.jurisdiction_type AS repositories_jurisdiction_type, repositories.quorum_percentage AS repositories_quorum_percentage, repositories.voting_period_days AS repositories_voting_period_days, repositories.min_signatures_for_voting AS repositories_min_signatures_for_voting, repositories.allow_public_proposals AS repositories_allow_public_proposals, repositories.allow_public_voting AS repositories_allow_public_voting, repositories.require_verification_for_voting AS repositories_require_verification_for_voting, repositories.is_active AS repositories_is_active, repositories.is_archived AS repositories_is_archived, repositories.created_at AS repositories_created_at, repositories.updated_at AS repositories_updated_at, repositories.proposals_count AS repositories_proposals_count, repositories.issues_count AS repositories_issues_count, repositories.contributors_count AS repositories_contributors_count 
civicgit_api  | FROM repositories 
civicgit_api  | WHERE repositories.is_active IS true AND (repositories.visibility = %(visibility_1)s OR repositories.visibility = %(visibility_2)s) ORDER BY repositories.created_at DESC]
civicgit_api  | [parameters: {'visibility_1': 'PUBLIC', 'visibility_2': 'AFFILIATES_ONLY'}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | INFO:     172.19.0.1:58650 - "POST /api/v1/repositories HTTP/1.1" 307 Temporary Redirect
civicgit_api  | INFO:     172.19.0.1:58650 - "POST /api/v1/repositories/ HTTP/1.1" 500 Internal Server Error
civicgit_api  | ERROR:    Exception in ASGI application
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | psycopg2.errors.InvalidTextRepresentation: invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 1: ...a-educa', 'vszvdzdv', false, NULL, 'POLICY_AREA', 'PUBLIC', ...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | 
civicgit_api  | The above exception was the direct cause of the following exception:
civicgit_api  | 
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 426, in run_asgi
civicgit_api  |     result = await app(  # type: ignore[func-returns-value]
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
civicgit_api  |     return await self.app(scope, receive, send)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1106, in __call__
civicgit_api  |     await super().__call__(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 122, in __call__
civicgit_api  |     await self.middleware_stack(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 184, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 162, in __call__
civicgit_api  |     await self.app(scope, receive, _send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/trustedhost.py", line 34, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 91, in __call__
civicgit_api  |     await self.simple_response(scope, receive, send, request_headers=headers)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 146, in simple_response
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
civicgit_api  |     raise exc
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
civicgit_api  |     await self.app(scope, receive, sender)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
civicgit_api  |     raise e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 718, in __call__
civicgit_api  |     await route.handle(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 276, in handle
civicgit_api  |     await self.app(scope, receive, send)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 66, in app
civicgit_api  |     response = await func(request)
civicgit_api  |                ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 274, in app
civicgit_api  |     raw_response = await run_endpoint_function(
civicgit_api  |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
civicgit_api  |     return await run_in_threadpool(dependant.call, **values)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
civicgit_api  |     return await anyio.to_thread.run_sync(func, *args)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/to_thread.py", line 33, in run_sync
civicgit_api  |     return await get_asynclib().run_sync_in_worker_thread(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
civicgit_api  |     return await future
civicgit_api  |            ^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 807, in run
civicgit_api  |     result = context.run(func, *args)
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/app/app/api/v1/endpoints/repositories.py", line 229, in create_repository
civicgit_api  |     db.commit()
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1969, in commit
civicgit_api  |     trans.commit(_to_root=True)
civicgit_api  |   File "<string>", line 2, in commit
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
civicgit_api  |     ret_value = fn(self, *arg, **kw)
civicgit_api  |                 ^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1256, in commit
civicgit_api  |     self._prepare_impl()
civicgit_api  |   File "<string>", line 2, in _prepare_impl
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
civicgit_api  |     ret_value = fn(self, *arg, **kw)
civicgit_api  |                 ^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 1231, in _prepare_impl
civicgit_api  |     self.session.flush()
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4312, in flush
civicgit_api  |     self._flush(objects)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4447, in _flush
civicgit_api  |     with util.safe_reraise():
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
civicgit_api  |     raise exc_value.with_traceback(exc_tb)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 4408, in _flush
civicgit_api  |     flush_context.execute()
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
civicgit_api  |     rec.execute(self)
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
civicgit_api  |     util.preloaded.orm_persistence.save_obj(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
civicgit_api  |     _emit_insert_statements(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/orm/persistence.py", line 1226, in _emit_insert_statements
civicgit_api  |     result = connection.execute(
civicgit_api  |              ^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
civicgit_api  |     return meth(
civicgit_api  |            ^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
civicgit_api  |     return connection._execute_clauseelement(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
civicgit_api  |     ret = self._execute_context(
civicgit_api  |           ^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
civicgit_api  |     return self._exec_single_context(
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
civicgit_api  |     self._handle_dbapi_exception(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2343, in _handle_dbapi_exception
civicgit_api  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
civicgit_api  |     self.dialect.do_execute(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
civicgit_api  |     cursor.execute(statement, parameters)
civicgit_api  | sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input value for enum repositoryvisibility: "PUBLIC"
civicgit_api  | LINE 1: ...a-educa', 'vszvdzdv', false, NULL, 'POLICY_AREA', 'PUBLIC', ...
civicgit_api  |                                                              ^
civicgit_api  | 
civicgit_api  | [SQL: INSERT INTO repositories (name, slug, description, is_fork, forked_from_id, type, visibility, jurisdiction_name, jurisdiction_type, quorum_percentage, voting_period_days, min_signatures_for_voting, allow_public_proposals, allow_public_voting, require_verification_for_voting, is_active, is_archived, created_at, updated_at, proposals_count, issues_count, contributors_count) VALUES (%(name)s, %(slug)s, %(description)s, %(is_fork)s, %(forked_from_id)s, %(type)s, %(visibility)s, %(jurisdiction_name)s, %(jurisdiction_type)s, %(quorum_percentage)s, %(voting_period_days)s, %(min_signatures_for_voting)s, %(allow_public_proposals)s, %(allow_public_voting)s, %(require_verification_for_voting)s, %(is_active)s, %(is_archived)s, %(created_at)s, %(updated_at)s, %(proposals_count)s, %(issues_count)s, %(contributors_count)s) RETURNING repositories.id]
civicgit_api  | [parameters: {'name': 'BRUMA-EDUCA', 'slug': 'bruma-educa', 'description': 'vszvdzdv', 'is_fork': False, 'forked_from_id': None, 'type': 'POLICY_AREA', 'visibility': 'PUBLIC', 'jurisdiction_name': 'zdgvgdgd', 'jurisdiction_type': 'Municipal', 'quorum_percentage': 10, 'voting_period_days': 7, 'min_signatures_for_voting': 500, 'allow_public_proposals': True, 'allow_public_voting': True, 'require_verification_for_voting': True, 'is_active': True, 'is_archived': False, 'created_at': datetime.datetime(2025, 11, 24, 19, 39, 10, 908702), 'updated_at': datetime.datetime(2025, 11, 24, 19, 39, 10, 908706), 'proposals_count': 0, 'issues_count': 0, 'contributors_count': 0}]
civicgit_api  | (Background on this error at: https://sqlalche.me/e/20/9h9h)
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/schemas/repository.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:49:15,680 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [233]
civicgit_api  | INFO:     Started server process [273]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:49:18,665 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:49:18,725 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:49:26,456 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [273]
civicgit_api  | INFO:     Stopping reloader process [1]
civicgit_api  | INFO:     Will watch for changes in these directories: ['/app']
civicgit_api  | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
civicgit_api  | INFO:     Started reloader process [1] using WatchFiles
civicgit_api  | INFO:     Started server process [8]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:49:29,521 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:49:29,564 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | INFO:     172.19.0.1:33294 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/models/repository.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:53:42,948 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [8]
civicgit_api  | INFO:     Started server process [26]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:53:44,729 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:53:44,771 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | INFO:     172.19.0.1:33102 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | WARNING:  WatchFiles detected changes in 'app/db/migrations/versions/202411241720_fix_repository_type_enum.py'. Reloading...
civicgit_api  | INFO:     Shutting down
civicgit_api  | INFO:     Waiting for application shutdown.
civicgit_api  | 2025-11-24 19:54:44,070 - civicgit - INFO - Encerrando CivicGit Backend...
civicgit_api  | INFO:     Application shutdown complete.
civicgit_api  | INFO:     Finished server process [26]
civicgit_api  | INFO:     Started server process [42]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-24 19:54:45,870 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-24 19:54:45,912 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | INFO:     172.19.0.1:43828 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:43842 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:43846 - "GET /health/db HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50178 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50186 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50194 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50206 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50212 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50216 - "OPTIONS /api/v1/auth/me HTTP/1.1" 200 OK
civicgit_api  | 2025-11-24 19:57:06,398 - civicgit.security - WARNING - Token verification failed: Signature has expired.
civicgit_api  | INFO:     172.19.0.1:50186 - "GET /api/v1/auth/me HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-24 19:57:06,402 - civicgit.security - WARNING - Token verification failed: Signature has expired.
civicgit_api  | INFO:     172.19.0.1:50186 - "GET /api/v1/auth/me HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-24 19:57:06,405 - civicgit.security - WARNING - Token verification failed: Signature has expired.
civicgit_api  | INFO:     172.19.0.1:50186 - "GET /api/v1/auth/me HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-24 19:57:06,410 - civicgit.security - WARNING - Token verification failed: Signature has expired.
civicgit_api  | INFO:     172.19.0.1:50186 - "GET /api/v1/auth/me HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-24 19:57:06,414 - civicgit.security - WARNING - Token verification failed: Signature has expired.
civicgit_api  | INFO:     172.19.0.1:50186 - "GET /api/v1/auth/me HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-24 19:57:06,417 - civicgit.security - WARNING - Token verification failed: Signature has expired.
civicgit_api  | INFO:     172.19.0.1:50186 - "GET /api/v1/auth/me HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-24 19:57:07,644 - civicgit.auth - WARNING - Login attempt failed - user not found: admin@civicgit.org
civicgit_api  | INFO:     172.19.0.1:50186 - "POST /api/v1/auth/login HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-24 19:57:10,230 - civicgit.auth - WARNING - Login attempt failed - user not found: admin@civicgit.org
civicgit_api  | INFO:     172.19.0.1:50186 - "POST /api/v1/auth/login HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-24 19:57:12,830 - civicgit.auth - WARNING - Login attempt failed - user not found: admin@civicgit.org
civicgit_api  | INFO:     172.19.0.1:50186 - "POST /api/v1/auth/login HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-24 19:57:13,694 - civicgit.auth - WARNING - Login attempt failed - user not found: admin@civicgit.org
civicgit_api  | INFO:     172.19.0.1:50186 - "POST /api/v1/auth/login HTTP/1.1" 401 Unauthorized
civicgit_api  | Traceback (most recent call last):
civicgit_api  |   File "/usr/local/bin/uvicorn", line 8, in <module>
civicgit_api  |     sys.exit(main())
civicgit_api  |              ^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1485, in __call__
civicgit_api  |     return self.main(*args, **kwargs)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1406, in main
civicgit_api  |     rv = self.invoke(ctx)
civicgit_api  |          ^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1269, in invoke
civicgit_api  |     return ctx.invoke(self.callback, **ctx.params)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 824, in invoke
civicgit_api  |     return callback(*args, **kwargs)
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 416, in main
civicgit_api  |     run(
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 582, in run
civicgit_api  |     ChangeReload(config, target=server.run, sockets=[sock]).run()
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/supervisors/basereload.py", line 50, in run
civicgit_api  |     for changes in self:
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/supervisors/basereload.py", line 69, in __next__
civicgit_api  |     return self.should_restart()
civicgit_api  |            ^^^^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/uvicorn/supervisors/watchfilesreload.py", line 87, in should_restart
civicgit_api  |     changes = next(self.watcher)
civicgit_api  |               ^^^^^^^^^^^^^^^^^^
civicgit_api  |   File "/usr/local/lib/python3.11/site-packages/watchfiles/main.py", line 130, in watch
civicgit_api  |     raw_changes = watcher.watch(debounce, step, rust_timeout, stop_event)
civicgit_api  |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
civicgit_api  | _rust_notify.WatchfilesRustInternalError: error in underlying watcher: IO error for operation on /app/app: Input/output error (os error 5) about ["/app/app"]
civicgit_api  | INFO:     Will watch for changes in these directories: ['/app']
civicgit_api  | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
civicgit_api  | INFO:     Started reloader process [1] using WatchFiles
civicgit_api  | INFO:     Started server process [8]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-25 11:50:28,335 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-25 11:50:28,470 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | INFO:     172.19.0.1:58664 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:47300 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:47306 - "GET /health/db HTTP/1.1" 200 OK
civicgit_api  | INFO:     Will watch for changes in these directories: ['/app']
civicgit_api  | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
civicgit_api  | INFO:     Started reloader process [1] using WatchFiles
civicgit_api  | INFO:     Started server process [8]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-25 11:53:36,273 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-25 11:53:36,384 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | INFO:     172.19.0.1:57652 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57664 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:57670 - "GET /health/db HTTP/1.1" 200 OK
civicgit_api  | INFO:     Will watch for changes in these directories: ['/app']
civicgit_api  | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
civicgit_api  | INFO:     Started reloader process [1] using WatchFiles
civicgit_api  | INFO:     Started server process [8]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-25 11:55:02,498 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-25 11:55:02,613 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | INFO:     172.19.0.1:40542 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40546 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:40562 - "GET /health/db HTTP/1.1" 200 OK
civicgit_api  | 2025-11-25 11:55:21,580 - civicgit.auth - WARNING - Login attempt failed - user not found: admin@civicgit.org
civicgit_api  | INFO:     172.19.0.1:44530 - "POST /api/v1/auth/login HTTP/1.1" 401 Unauthorized
civicgit_api  | INFO:     Will watch for changes in these directories: ['/app']
civicgit_api  | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
civicgit_api  | INFO:     Started reloader process [1] using WatchFiles
civicgit_api  | INFO:     Started server process [8]
civicgit_api  | INFO:     Waiting for application startup.
civicgit_api  | 2025-11-25 11:56:47,963 - civicgit - INFO - Iniciando CivicGit Backend...
civicgit_api  | 2025-11-25 11:56:48,090 - civicgit - INFO - Tabelas do banco de dados criadas com sucesso!
civicgit_api  | INFO:     Application startup complete.
civicgit_api  | INFO:     172.19.0.1:50212 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50056 - "GET /health HTTP/1.1" 200 OK
civicgit_api  | INFO:     172.19.0.1:50064 - "GET /health/db HTTP/1.1" 200 OK
civicgit_api  | 2025-11-25 11:56:54,914 - civicgit.auth - WARNING - Login attempt failed - user not found: admin@civicgit.org
civicgit_api  | INFO:     172.19.0.1:50068 - "POST /api/v1/auth/login HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-25 11:56:58,065 - civicgit.auth - WARNING - Login attempt failed - user not found: admin@civicgit.org
civicgit_api  | INFO:     172.19.0.1:50068 - "POST /api/v1/auth/login HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-25 11:56:58,859 - civicgit.auth - WARNING - Login attempt failed - user not found: admin@civicgit.org
civicgit_api  | INFO:     172.19.0.1:50068 - "POST /api/v1/auth/login HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-25 11:56:59,540 - civicgit.auth - WARNING - Login attempt failed - user not found: admin@civicgit.org
civicgit_api  | INFO:     172.19.0.1:50068 - "POST /api/v1/auth/login HTTP/1.1" 401 Unauthorized
civicgit_api  | 2025-11-25 11:57:00,026 - civicgit.auth - WARNING - Login attempt failed - user not found: admin@civicgit.org
civicgit_api  | INFO:     172.19.0.1:50068 - "POST /api/v1/auth/login HTTP/1.1" 401 Unauthorized
